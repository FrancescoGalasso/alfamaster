{% extends 'product/base.html' %}

{% block content %}

    <br><input type="text" name="firstname" placeholder="Type product's name"><br>

    <br/>

    <table id="display" style="width:100%">
            <!-- thead -->
        <thead>
        <tr>
            <th style="visibility:hidden;"></th>
            <th style="visibility:hidden;"></th>
            <th style="visibility:hidden;"></th>
        </tr>
        <tr>
            <th>Raw material</th>
            <th>Specific weight [g/mL]</th>
            <th>RM cost [$/L]</th>
        </tr>
        </thead>
                    <!-- tbody -->
        <tbody>
        <tr id="delete_row0">
                <!-- <td><button id="delete_row0" style="margin-right: 3; display: none;" onclick="deleteRow(this.id)">X</button><input type="text" name="firstname" placeholder="Type raw material name"></td> -->
                <td><div style="min-width: 230px;"><button style="margin-right: 3;" onclick="deleteRow(this.parentNode.parentNode.parentNode.id)">X</button><input type="text" name="firstname" placeholder="Type raw material name"></div></td>
                <td><input type="text" name="firstname" placeholder="Type specific weight"></td>
                <td><input type="text" name="firstname" placeholder="Type RM cost"></td>
        </tr>
        </tbody>
    </table>
    
    <div><button onclick="addRawMaterial()" style="margin-top: 10">Add new Raw Material</button><button onclick="addColumn()" style="margin-left: 15">Add new base</button></div>



    <script type="text/javascript">
        var rowId = 0;

        function getRowId() {
            rowId += 1;
            return rowId;
        }


        function addRawMaterial() {
            // document.getElementById("field2").value = document.getElementById("field1").value;
            console.log("clicked on 'Add new Raw Material'");
            var table = document.getElementById("display");
            var row = table.insertRow(-1);
            row.id = 'delete_row' + getRowId();
            console.log(row.id);
            var cell1 = row.insertCell(0);
            // cell1.innerHTML = '<button id="delete_row' + getRowId() + '" style="margin-right: 3; display: none;" onclick="deleteRow(this.id)">X</button><input type="text" name="firstname" placeholder="Type Raw Material name">';
            cell1.innerHTML = '<button style="margin-right: 3;" onclick="deleteRow(this.parentNode.parentNode.id)">X</button><input type="text" name="firstname" placeholder="Type Raw Material name">';
            var cell2 = row.insertCell(1);
            cell2.innerHTML = '<input type="text" name="firstname" placeholder="Type Specific weight">';
            var cell3 = row.insertCell(2);
            cell3.innerHTML = '<input type="text" name="firstname" placeholder="Type RM cost">';

        }
        
        function deleteRow(rowId) {
            console.log(rowId);
            console.log("Row index is: " + rowId);
            var element = document. getElementById(rowId);
            element. parentNode. removeChild(element);
        }

        function addNewBase(){
            console.log("add new base");
        }

        function addColumn() {    
        // var tblHeadObj = document.getElementById('display').tHead; //table head
        // for (var h=0; h< tblHeadObj.rows.length; h++) {
        // var newTH = document.createElement('th');
        // tblHeadObj.rows[h].appendChild(newTH); //append ne th to table
        // newTH.innerHTML = 'Column '+ (tblHeadObj.rows[h].cells.length); //append th content to th
        // }
        
            var thead_col = ["%w/w", "mL/100g", "%v/v", "mL/1000g", "Formula Cost [$/L]"]
            var tbody_input = ['<input type="text" name="firstname" placeholder="Type %w/w">', '','','','']


            var tblBodyObj = document.getElementById('display').tBodies[0]; //table body
            for (var i=0; i< 5; i++) {
                var newCell = tblBodyObj.rows[0].insertCell(-1); //create new cell
                // console.log(thead_col);
                // console.log(thead_col.length);
                // console.log(thead_col[i]);
                newCell.innerHTML = tbody_input[i]; //append th content to th
            }

            var tblHeadObj = document.getElementById('display').tHead; //table head
            
            var newTH = document.createElement('th');
            tblHeadObj.rows[0].appendChild(newTH); //append ne th to table
            // newTH.style='colspan=5';
            // newTH.style["colspan"] = "5";
            // newTH.style.color = "red"; //funzia
            // newTH.style.height = "200px";
            // netTH.style.colSpan = "5";
            newTH.innerHTML = '<input type="text" placeholder="Type Base name">'; //append th content to th
            newTH.colSpan = 5;

            for (var i=0; i< 5; i++) {
                var newTH = document.createElement('th');
                tblHeadObj.rows[1].appendChild(newTH); //append ne th to table
                // console.log(thead_col);
                // console.log(thead_col.length);
                // console.log(thead_col[i]);
                newTH.innerHTML = thead_col[i]; //append th content to th
            }
        }

        $( document ).ready(function() {
            console.log( "page HTML ready!" );   
        });
    </script>
{% endblock %}